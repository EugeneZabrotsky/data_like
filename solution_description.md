Решение состоит из генерации фичей, обучении катбуста и подбора гиперпараметров с помощью байесовской оптимизации.

Выделю группы фичей, объединённые идеей, которые хоть как-то работали:
1. Самые главные фичи - это конечно customer_id и story_id как категориальные для катбуста. Он строит внутри много клёвых статистик, в том числе Mean target enconding. Уже только на них качество 0.26+.
2. Эти стандартные возраст, marital status, кол-во детей, продукты.
3. Длина текста, количество страниц в истории, колво ссылок. Сентимент текста в истории (dostoevsky помог)
4. Процент и сумма покупок по разным категориям. С помощью MCC кодов.
5. И самое вкусное на последок, скор 0.31 -> 0.35: будущее!
5.1 Сколько раз человек уже смотрел всего(эту) историй(ию), сколько раз человек ещё посмотрит всего(эту) историй(ию).
Там по данным можно заметить, что в одну секунду человеку приходит "набор" историй, причём всех разных.
5.2 Давайте посчитаем количество историй в этом "наборе" (фича жжёт не по-детски).
5.3 Посчитаем время до ближайшего "набора" в прошлом и будущем.
Ещё из интересных наблюдений: там в конце трейна распределение данных резко меняется. Резко падает количество дизлайков и лайков.
Если мы зашлём константно -1 и получим скор 0.00237, то сможем посчитать, что распределение на тесте почти наверняка такое же, как в последнем участке трейна. Само по себе наблюдение у меня не получилось как-то использовать, но стало понятно, что полученная на трейне модель будет давать смещенные предсказания на тесте. Поэтому при бинаризации в +-1 я выбирал порожек не 0, а +0.01. (33% минус единичек -> 42% -1). И это дало буст 0.35 -> 0.37.

В общем, рецепт соревнования: катбуст, будущее и порожек.

main_notebook соответствует full_22k* посылке.
main_notebook-Copy1 соответствует full_33k* посылкам.
